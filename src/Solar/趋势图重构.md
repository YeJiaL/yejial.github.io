# 趋势图重构



## 范围

### 对外

1. /v1/monitorParameters/List-monitor-components-customer/{deviceTypeId}/{serialNumber}
2. /v1/monitorParameters/list-monitor-values-customer/{deviceTypeId}/{monitorComponent}/{serialNumber}
3. /v1/monitorParameters/list-monitor-values/{deviceTypeId}/{monitorComponent}/{serialNumber}
4. /v1/monitorParameters/list-monitor-values/List-monitor-components/{deviceTypeId}/{serialNumber}
5. /v1/monitorParameters/query-list 
6. /v1/service/monitorParameters/
7. /v1/service/monitorParameters/list-monitor-values 
8. /v1/service/monitorParameters/update-by-system-id
9. /v1/deviceLog/device-logs-for-chart
10. /v1/deviceLog/device-logs-for-chart-customer
11. /v1/deviceLog/ws-monitor-from-device-log/{systemId}/{deviceTypeName}



### 对内

原monitorParametersService中所有方法逻辑重写

原monitorparameterssystemidService中所有方法逻辑重写

原MonitorParametersGrpcServiceImpl中所有方法逻辑重写





### 要求：

重构前后表现一致

> 1. /v1/deviceLog/device-logs-for-chart
> 2. /v1/deviceLog/device-logs-for-chart-customer
>
> 以上接口部分逻辑除外（因要求，此次去除了以下监控值每天获取一条数据逻辑）
>
> * 1、MR磁体数据处理
> * 2、MR的水冷和梯度数据
> * 3、CT球馆特殊处理



|      | 前                                                           | 后                                                           |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
|      | /v1/monitorParameters/List-monitor-components-customer/{deviceTypeId}/{serialNumber} | /v1/monitorComponents/customer-list/{deviceTypeId}/{serialNumber} |
|      | /v1/monitorParameters/list-monitor-values-customer/{deviceTypeId}/{monitorComponent}/{serialNumber} | ~~/v1/monitorValues/customer-list/{deviceTypeId}/{componentId}/{serialNumber}~~ |
|      | /v1/monitorParameters/list-monitor-values/{deviceTypeId}/{monitorComponent}/{serialNumber} | ~~/v1/monitorValues/list/{componentId}~~                     |
|      | /v1/monitorParameters/list-monitor-values/List-monitor-components/{deviceTypeId}/{serialNumber} | /v1/monitorComponents/service-list/{deviceTypeId}/{serialNumber} |
|      | /v1/monitorParameters/query-list                             | ~~/v2/service/monitorParameters/query-list~~                 |
|      | /v1/service/monitorParameters/                               | ~~/v2/service/monitorParameters/~~                           |
|      | /v1/service/monitorParameters/list-monitor-values            | /v2/service/monitorParameters/query-list-by-system-id        |
|      | /v1/service/monitorParameters/update-by-system-id            | /v2/service/monitorParameters/update-by-system-id            |
|      | /v1/deviceLog/device-logs-for-chart                          | /v2/deviceLog/device-logs-for-chart                          |
|      | /v1/deviceLog/device-logs-for-chart-customer                 | /v2/deviceLog/device-logs-for-chart-customer                 |
|      | /v1/deviceLog/ws-monitor-from-device-log/{systemId}/{deviceTypeName} | /v2/deviceLog/ws-monitor-from-device-log/{systemId}/{deviceTypeName} |



